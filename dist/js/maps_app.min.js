function initMap(){MapsApp.init("map",center,poiData,options,"amenity-list")}var PoiMap=function(a){var b,c,d,e,f,g,h,i=function(a,g,i,j){return w(a,g)&&(c=a,d=g,f=i,b=k(),e=l(d),m(),j.infoWindow&&(r(),v(),t()),j.customMarkers&&(h=j.customMarkers,p())),this},j=function(){return f},k=function(){var b,e=a.getElementById(c);return b=new google.maps.Map(e,{center:d,scrollwheel:!1,zoom:15})},l=function(a){return new google.maps.Marker({position:a,map:b})},m=function(){f.forEach(function(a,b){a.marker=l(a.coords)}),n(),o()},n=function(){g=new google.maps.LatLngBounds;for(var a=0;a<f.length;a++)g.extend(f[a].marker.getPosition())},o=function(){b.fitBounds(g)},p=function(){f.forEach(function(a,b){var c=a.type,d=a.marker;q(d,c,!1).call(),h.zoom&&(d.addListener("mouseover",q(d,c,!0,new google.maps.Point(14,20))),d.addListener("mouseout",q(d,c,!1)))})},q=function(a,b,c,d){return function(){var e=c?h.zoom:h.icon,f={url:h.path+b+e+".png",origin:new google.maps.Point(0,0),anchor:d};a.setIcon(f)}},r=function(){_infoWindow=new google.maps.InfoWindow({maxWidth:400})},s=function(a){var c=u(f[a]);_infoWindow.setContent(c),_infoWindow.open(b,f[a].marker)},t=function(){google.maps.event.addListener(_infoWindow,"closeclick",function(){o()})},u=function(a){var b;return b='<div id="maps-window">',b+="<h3>"+a.name+"</h3>",b+='<a href="'+a.website_url+'">'+a.website_url+"</a>",b+="<p>"+a.description+"</p>",b+="</div>"},v=function(){f.forEach(function(a,b){a.marker.addListener("click",function(){s(b)})})},w=function(b,c){return b?"string"!=typeof b?(console.error("Error: Map ID must be a string"),!1):a.getElementById(b)?c?c.lat&&c.lng?"number"!=typeof c.lat||"number"!=typeof c.lng?(console.error("Error: Lattitude and longitude must be numbers"),!1):!0:(console.error("Error: Please provide central location lattitude and longitude"),!1):(console.error("Error: No central location provided"),!1):(console.error("Error: Map ID must be part of the DOM!"),!1):(console.error("Error: No Map ID present"),!1)};return{init:i,getPoiArray:j,changeIcon:q,createInfoWindow:s}}(document),PoiList=function(){var a,b,c,d,e=function(d,e,g){return a=d,b=e,c=g,f(),i(),this},f=function(){var b=g();document.getElementById(a).innerHTML=b},g=function(){var a;return a='<ul id="poi-list">',b.forEach(function(b,c){a+=h(b)}),a+="</ul>"},h=function(a){var b,c="img/amenity_icons/"+a.type[0]+"_icon_large.png",d=a.name,e=.2,f=4;return b="<li>",b+='<img class="poi-icon" src="'+c+'">',b+="<h3>"+d+"</h3>",b+='<span class="poi-distance">'+e+" miles from you</span>",b+='<span class="poi-rating">Rating: <span>'+f+"</span></span>",b+="</li>"},i=function(){d=document.getElementById("poi-list").getElementsByTagName("li"),console.log(d[0]),Array.prototype.forEach.call(d,function(a,d){a.addEventListener("mouseover",function(){c.changeIcon(b[d].marker,b[d].type,!0,new google.maps.Point(14,20)).call()}),a.addEventListener("mouseleave",function(){c.changeIcon(b[d].marker,b[d].type,!1).call()}),a.addEventListener("click",function(){c.createInfoWindow(d)})})};return{init:e}}(),MapsApp=function(a,b){var c,d,e,f=function(f,g,h,i,j){return c=a.init(f,g,h,i),j&&(e=c.getPoiArray(),d=b.init(j,e,c)),this},g=function(a,b,d){c.customMarkerIcons(a,b,d)};return{init:f,customMarkerIcons:g}}(PoiMap||{},PoiList||{}),poiData=[{name:"Supermercados Coviran",type:"supermarket",description:"A supermarket offering all your grocery needs",website_url:"http://www.supermarket.com",coords:{lat:28.05249,lng:-16.71548}},{name:"Mercadona",type:"supermarket",description:"Tenerife&apos;s biggest supermarket",website_url:"http://www.mercadona.com",coords:{lat:28.05457,lng:-16.70861}},{name:"O&apos;Neill&apos;s Bar",type:"bar",description:"A lively Irish bar",website_url:"http://www.oneills.com",coords:{lat:28.056,lng:-16.72445}},{name:"Claddagh Irish Bar",type:"restaurant",description:"Always a friendly atmosphere",website_url:"http://www.claddagh.com",coords:{lat:28.05,lng:-16.7166667}},{name:"Taylor&apos;s Lounge",type:"bar",description:"A cool bar and stuff",website_url:"http://www.taylors.com",coords:{lat:28.05176,lng:-16.71619}}],options={infoWindow:1,customMarkers:{path:"./img/amenity_icons/",zoom:"_icon_large",icon:"_icon_small"}},center={lat:28.050615,lng:-16.71212};