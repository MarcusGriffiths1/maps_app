!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./PoiFilter"),h=d(g),i=a("./PoiList"),j=d(i),k=a("./PoiMap"),l=d(k),m=a("./PoiData"),n=d(m),o=a("./PubSub"),p=(d(o),function(){function a(b,c,d,f){e(this,a),this._center=c,this._theData=new n.default(d),this._theMap=new l.default(b,this._center,this._theData.getPoiData()),this._options=f,this._options.infoWindow===!0&&(this._theMap.initialiseInfoWindow(),this._theData.addMarkerClickEvents()),this._options.customMarkers&&this._theData.addCustomMarkers(this._options.customMarkers),this._options.showDistance&&this._theData.addDistances(c)}return f(a,[{key:"createList",value:function(a){this._theList=new j.default(a,this._theData.getPoiData())}},{key:"createFilter",value:function(a){this._theFilter=new h.default(a,this._theData.getPoiData())}}]),a}());c.default=p},{"./PoiData":2,"./PoiFilter":3,"./PoiList":4,"./PoiMap":5,"./PubSub":6}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./PubSub"),h=d(g),i=function(){function a(b){e(this,a),this._poiData=this._formatData(b),this._filterList=[],this._sortBy,this._subscribers()}return f(a,[{key:"_formatData",value:function(a){var b=this;return a.forEach(function(a,c){a.marker=b._createMarker(a.coords,null),a.key=c}),a}},{key:"_createMarker",value:function(a,b){return new google.maps.Marker({position:a,map:b})}},{key:"_resetMarkers",value:function(){this._poiData.forEach(function(a,b){a.marker.setMap(null)})}},{key:"_indexOf",value:function(a,b){for(var c=0;c<b.length;){if(b[c]===a)return c;c++}return-1}},{key:"_toggleFilter",value:function(a){var b=this._indexOf(a,this._filterList);b!=-1?this._filterList.splice(b,1):this._filterList.push(a),h.default.publish("dataUpdated",this.getPoiData(!0))}},{key:"_filterData",value:function(){var a=this;if(!this._filterList.length)return this._poiData;var b=this._poiData.filter(function(b){for(var c=!0,d=0;d<a._filterList.length;d++)a._filterList[d]===b.type&&(c=!1);return c});return b}},{key:"_addDistances",value:function(a,b,c){var d=this,e=new google.maps.LatLng(b),f=a.marker.getPosition(),g=new google.maps.DistanceMatrixService,i=function(b,e){var f=(b.rows[0].elements[0].distance.value/1e3).toFixed(1);a.distance=f,c==d._poiData.length-1&&h.default.publish("dataUpdated",d.getPoiData())};g.getDistanceMatrix({origins:[e],destinations:[f],travelMode:"DRIVING"},i)}},{key:"_sortData",value:function(a){var b=this;if("undefined"==typeof this._sortBy)return a;var c=a.sort(function(a,c){return a[b._sortBy]<c[b._sortBy]?-1:a[b._sortBy]>c[b._sortBy]?1:0});return c}},{key:"_makeIcon",value:function(a,b,c,d){var e=this;return function(){var f=c?e._customMarkersSettings.zoom:e._customMarkersSettings.icon,g={url:e._customMarkersSettings.path+b+f+".png",origin:new google.maps.Point(0,0),anchor:d};a.setIcon(g)}}},{key:"_createCustomMarkers",value:function(){var a=this;this._poiData.forEach(function(b,c){var d=b.type,e=b.marker;a._makeIcon(e,d,!1).call(),a._customMarkersSettings.zoom&&(e.addListener("mouseover",a._makeIcon(e,d,!0,new google.maps.Point(14,20))),e.addListener("mouseout",a._makeIcon(e,d,!1)))})}},{key:"_addCustomMarkerSubscribers",value:function(){var a=this;h.default.subscribe("listItemMouseOver",function(b,c){var d=c.type,e=c.marker;a._makeIcon(e,d,!0,new google.maps.Point(14,20)).call()}),h.default.subscribe("listItemMouseOut",function(b,c){var d=c.type,e=c.marker;a._makeIcon(e,d,!1).call()})}},{key:"_subscribers",value:function(){var a=this;h.default.subscribe("filterToggled",function(b,c){console.log(c),a._toggleFilter(c)})}},{key:"getPoiData",value:function(a){a===!0&&this._resetMarkers();var b=this._filterData(),c=this._sortData(b);return c}},{key:"addMarkerClickEvents",value:function(){this._poiData.forEach(function(a,b){a.marker.addListener("click",function(){h.default.publish("markerClicked",a)})})}},{key:"addCustomMarkers",value:function(a){this._customMarkersSettings=a,this._createCustomMarkers(),this._addCustomMarkerSubscribers()}},{key:"addDistances",value:function(a){var b=this;this._poiData.forEach(function(c,d){b._addDistances(c,a,d)})}}]),a}();c.default=i},{"./PubSub":6}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./PubSub"),h=d(g),i=function(){function a(b,c){e(this,a),this._filterId=b,this._setFilterArray(c),this._createFilterForm(),this._addFilterEventListeners()}return f(a,[{key:"_setFilterArray",value:function(a){this._filterArray=[];var b={};for(var c in a)"undefined"==typeof b[a[c].type]&&this._filterArray.push(a[c].type),b[a[c].type]=0}},{key:"_createFilterForm",value:function(){var a=this._makeFilterFormHTML();document.getElementById(this._filterId).innerHTML=a}},{key:"_makeFilterFormHTML",value:function(){var a=this,b="";return this._filterArray.forEach(function(c,d){b+=a._makeFilterItemHTML(c)}),b}},{key:"_makeFilterItemHTML",value:function(a){var b='<li class="filters__item">';return b+='<input type="checkbox" id="'+a+'" name="filter" value= "'+a+'" checked>',b+='<label for="'+a+'">'+a+"</label>",b+="</li>"}},{key:"_addFilterEventListeners",value:function(){var a=document.getElementsByName("filter");Array.prototype.forEach.call(a,function(a){a.addEventListener("change",function(){h.default.publish("filterToggled",a.value)})})}}]),a}();c.default=i},{"./PubSub":6}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./PubSub"),h=d(g),i=function(){function a(b,c){e(this,a),this._listId=b,this._updatePoiList(c),this._subscriptions()}return f(a,[{key:"_updatePoiList",value:function(a){document.getElementById(this._listId).innerHTML="";var b=this._makeListHTML(a);document.getElementById(this._listId).innerHTML=b,this._addListEventListeners(a)}},{key:"_makeListHTML",value:function(a){var b=this,c="";return a.forEach(function(a,d){c+=b._makeListItemHTML(a)}),c+=""}},{key:"_makeListItemHTML",value:function(a){var b="img/amenity_icons/"+a.type+"_icon_large.png",c=a.name,d=4,e='<li class="poi" data-key="'+a.key+'">';return e+='<img class="poi__icon" src="'+b+'">',e+='<h3 class="poi__title">'+c+"</h3>","undefined"!=typeof a.distance&&(e+='<span class="poi__distance">'+a.distance+" from you</span>"),e+='<span class="poi__rating">Rating: <span>'+d+"</span></span>",e+="</li>"}},{key:"_addListEventListeners",value:function(a){var b=document.getElementById(this._listId).getElementsByTagName("li");[].forEach.call(b,function(b,c){for(var d=b.getAttribute("data-key"),e=void 0,f=0;f<a.length;f++)a[f].key==d.toString()&&(e=a[f]);b.addEventListener("mouseover",function(){h.default.publish("listItemMouseOver",e)}),b.addEventListener("mouseleave",function(){h.default.publish("listItemMouseOut",e)}),b.addEventListener("click",function(){h.default.publish("markerClicked",e)})})}},{key:"_subscriptions",value:function(){var a=this;h.default.subscribe("markerClicked",function(a,b){}),h.default.subscribe("dataUpdated",function(b,c){a._updatePoiList(c)})}}]),a}();c.default=i},{"./PubSub":6}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./PubSub"),h=d(g),i=function(){function a(b,c,d){e(this,a),this._validateMapData(b,c)&&(this._mapId=b,this._mainLocation=c,this._theMap=this._createMap(),this._mainMarker=this._createMarker(this._mainLocation,this._theMap),this.updatePoiMarkers(d),this._subscriptions())}return f(a,[{key:"_createMap",value:function(){var a=document.getElementById(this._mapId),b=new google.maps.Map(a,{center:this._mainLocation,scrollwheel:!1,zoom:15});return b}},{key:"_createMarker",value:function(a,b){return new google.maps.Marker({position:a,map:b})}},{key:"_validateMapData",value:function(a,b){return a?"string"!=typeof a?(console.error("Error: Map ID must be a string"),!1):document.getElementById(a)?b?b.lat&&b.lng?"number"==typeof b.lat&&"number"==typeof b.lng||(console.error("Error: Lattitude and longitude must be numbers"),!1):(console.error("Error: Please provide central location lattitude and longitude"),!1):(console.error("Error: No central location provided"),!1):(console.error("Error: Map ID must be part of the DOM!"),!1):(console.error("Error: No Map ID present"),!1)}},{key:"_setBounds",value:function(a){this._bounds=new google.maps.LatLngBounds,this._bounds.extend(this._mainMarker.getPosition());for(var b=0;b<a.length;b++)this._bounds.extend(a[b].marker.getPosition());this._fitBounds()}},{key:"_fitBounds",value:function(){this._theMap.fitBounds(this._bounds)}},{key:"_createInfoWindow",value:function(){this._infoWindow=new google.maps.InfoWindow({maxWidth:400})}},{key:"_onDestroyInfoWindow",value:function(){var a=this;google.maps.event.addListener(this._infoWindow,"closeclick",function(){a._fitBounds()})}},{key:"_setInfoWindow",value:function(a){var b=this._composeInfoWindowString(a);this._infoWindow.setContent(b),this._infoWindow.open(this._theMap,a.marker),this._theMap.panTo(a.marker.getPosition())}},{key:"_composeInfoWindowString",value:function(a){var b;return b='<div id="maps-window">',b+="<h3>"+a.name+"</h3>",b+='<a href="'+a.website_url+'">'+a.website_url+"</a>",b+="<p>"+a.description+"</p>",b+="</div>"}},{key:"_subscriptions",value:function(){var a=this;h.default.subscribe("markerClicked",function(b,c){a._setInfoWindow(c)}),h.default.subscribe("dataUpdated",function(b,c){a.updatePoiMarkers(c)}),h.default.subscribe("filterToggled",function(b,c){a._infoWindow.close()})}},{key:"updatePoiMarkers",value:function(a){var b=this,c=a;c.forEach(function(a,c){a.marker.setMap(b._theMap)}),this._setBounds(c)}},{key:"initialiseInfoWindow",value:function(){this._createInfoWindow(),this._onDestroyInfoWindow()}}]),a}();c.default=i},{"./PubSub":6}],6:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),this.topics=[],this.subscriberUid=-1}return e(a,[{key:"publish",value:function(a,b){if(!this.topics[a])return!1;for(var c=this.topics[a],d=c?c.length:0;d--;)c[d].func(a,b);return this}},{key:"subscribe",value:function(a,b){this.topics[a]||(this.topics[a]=[]);var c=(++this.subscriberUid).toString();return this.topics[a].push({token:c,func:b}),c}},{key:"unsubscribe",value:function(a){for(var b in this.topics)if(this.topics[b])for(var c=0,d=this.topics[b].length;c<d;c++)if(this.topics[b][c].token===a)return this.topics[b].splice(c,1),a;return this}}]),a}(),g=new f;c.default=g},{}],7:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=[{name:"Supermercados Coviran",type:"supermarket",description:"A supermarket offering all your grocery needs",website_url:"http://www.supermarket.com",coords:{lat:28.05249,lng:-16.71548}},{name:"Mercadona",type:"supermarket",description:"Tenerife&apos;s biggest supermarket",website_url:"http://www.mercadona.com",coords:{lat:28.05457,lng:-16.70861}},{name:"O&apos;Neill&apos;s Bar",type:"bar",description:"A lively Irish bar",website_url:"http://www.oneills.com",coords:{lat:28.056,lng:-16.72445}},{name:"Taylor&apos;s Lounge",type:"bar",description:"A cool bar and stuff",website_url:"http://www.taylors.com",coords:{lat:28.05176,lng:-16.71619}},{name:"Claddagh Irish Bar",type:"restaurant",description:"Always a friendly atmosphere",website_url:"http://www.claddagh.com",coords:{lat:28.05,lng:-16.7166667}}],e={lat:28.050615,lng:-16.71212};c.places=d,c.mainMarker=e},{}],8:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}var e=a("./MapsApp/MapsApp"),f=d(e),g=a("./data/mockdata"),h={infoWindow:!0,customMarkers:{path:"./img/amenity_icons/",zoom:"_icon_large",icon:"_icon_small"},showDistance:!0,sortBy:["type","distance"]},i=new f.default("map",g.mainMarker,g.places,h);i.createList("js-amenity-list"),i.createFilter("js-filter-controls")},{"./MapsApp/MapsApp":1,"./data/mockdata":7}]},{},[8]);