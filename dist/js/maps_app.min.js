function initMap(){MapsApp.init("map",{lat:28.050615,lng:-16.71212},poiData,options,"amenity-list")}var PoiMap=function(a){var b,c,d,e,f,g,h=function(a,g,h,l){return u(a,g)&&(c=a,d=g,f=h,b=i(),e=j(d),k(),l.infoWindow&&(p(),t(),r()),l.customMarkers&&n(l.customMarkers)),this},i=function(){var b,e=a.getElementById(c);return b=new google.maps.Map(e,{center:d,scrollwheel:!1,zoom:15})},j=function(a){return new google.maps.Marker({position:a,map:b})},k=function(){f.forEach(function(a,b){a.marker=j(a.coords)}),l(),m()},l=function(){g=new google.maps.LatLngBounds;for(var a=0;a<f.length;a++)g.extend(f[a].marker.getPosition())},m=function(){b.fitBounds(g)},n=function(a){f.forEach(function(b,c){var d=b.type,e=b.marker;o(e,a.path,d,a.icon).call(),a.zoom&&(e.addListener("mouseover",o(e,a.path,d,a.zoom,new google.maps.Point(14,20))),e.addListener("mouseout",o(e,a.path,d,a.icon)))})},o=function(a,b,c,d,e){return function(){var f={url:b+c+d+".png",origin:new google.maps.Point(0,0),anchor:e};a.setIcon(f)}},p=function(){_infoWindow=new google.maps.InfoWindow({maxWidth:400})},q=function(a){var c=s(f[a]);_infoWindow.setContent(c),_infoWindow.open(b,f[a].marker)},r=function(){google.maps.event.addListener(_infoWindow,"closeclick",function(){m()})},s=function(a){var b;return b='<div id="maps-window">',b+="<h3>"+a.name+"</h3>",b+='<a href="'+a.website_url+'">'+a.website_url+"</a>",b+="<p>"+a.description+"</p>",b+="</div>"},t=function(){f.forEach(function(a,b){a.marker.addListener("click",function(){q(b)})})},u=function(b,c){return b?"string"!=typeof b?(console.error("Error: Map ID must be a string"),!1):a.getElementById(b)?c?c.lat&&c.lng?"number"!=typeof c.lat||"number"!=typeof c.lng?(console.error("Error: Lattitude and longitude must be numbers"),!1):!0:(console.error("Error: Please provide central location lattitude and longitude"),!1):(console.error("Error: No central location provided"),!1):(console.error("Error: Map ID must be part of the DOM!"),!1):(console.error("Error: No Map ID present"),!1)};return{init:h}}(document),PoiList=function(){var a,b,c,d=function(d,f,g){a=d,b=f,c=g,e(),h()},e=function(){var c=f(b);document.getElementById(a).innerHTML=c},f=function(a){var b;return b='<ul id="poi-list">',a.forEach(function(a,c){b+=g(a),console.log(b)}),b+="</ul>"},g=function(a){var b,c="img/amenity_icons/"+a.type[0]+"_icon_large.png",d=a.name,e=.2,f=4;return b="<li>",b+='<img class="poi-icon" src="'+c+'">',b+="<h3>"+d+"</h3>",b+='<span class="poi-distance">'+e+" miles from you</span>",b+='<span class="poi-rating">Rating: <span>'+f+"</span></span>",b+="</li>"},h=function(){var a=document.getElementById("poi-list").getElementsByTagName("li");Array.prototype.forEach.call(a,function(a,d){a.addEventListener("mouseover",function(){c.changeIcon(b[d].marker,"./img/amenity_icons/",b[d].type[0],"_icon_large",new google.maps.Point(14,20))()}),a.addEventListener("mouseleave",function(){c.changeIcon(b[d].marker,"./img/amenity_icons/",b[d].type[0],"_icon_small")()}),a.addEventListener("click",function(){c.createInfoWindow(d)})})};return{init:d}}(),MapsApp=function(a,b){var c,d=function(b,d,e,f,g){return c=a.init(b,d,e,f),this},e=function(a,b,d){c.customMarkerIcons(a,b,d)};return{init:d,customMarkerIcons:e}}(PoiMap||{},PoiList||{}),poiData=[{name:"Supermercados Coviran",type:"supermarket",description:"A supermarket offering all your grocery needs",website_url:"http://www.supermarket.com",coords:{lat:28.05249,lng:-16.71548}},{name:"Mercadona",type:"supermarket",description:"Tenerife&apos;s biggest supermarket",website_url:"http://www.mercadona.com",coords:{lat:28.05457,lng:-16.70861}},{name:"O&apos;Neill&apos;s Bar",type:"bar",description:"A lively Irish bar",website_url:"http://www.oneills.com",coords:{lat:28.056,lng:-16.72445}},{name:"Claddagh Irish Bar",type:"bar",description:"Always a friendly atmosphere",website_url:"http://www.claddagh.com",coords:{lat:28.05,lng:-16.7166667}},{name:"Taylor&apos;s Lounge",type:"bar",description:"A cool bar and stuff",website_url:"http://www.taylors.com",coords:{lat:28.05176,lng:-16.71619}}],options={infoWindow:1,customMarkers:{path:"./img/amenity_icons/",zoom:"_icon_large",icon:"_icon_small"}};