var PoiMap=function(a){var b,c,d,e,f,g,h,i=function(a,g,i,j){return x(a,g)&&(c=a,d=g,f=i,b=k(),e=l(d),m(),j.infoWindow&&(s(),w(),u()),j.customMarkers&&(h=j.customMarkers,q())),this},j=function(){return f},k=function(){var b,e=a.getElementById(c);return b=new google.maps.Map(e,{center:d,scrollwheel:!1,zoom:15})},l=function(a){return new google.maps.Marker({position:a,map:b})},m=function(){f.forEach(function(a,b){a.marker=l(a.coords)}),n(),o()},n=function(){g=new google.maps.LatLngBounds;for(var a=0;a<f.length;a++)g.extend(f[a].marker.getPosition())},o=function(){b.fitBounds(g)},p=function(a){f.forEach(function(c,d){c.type===a&&(null!==c.marker.getMap()?c.marker.setMap(null):c.marker.setMap(b))})},q=function(){f.forEach(function(a,b){var c=a.type,d=a.marker;r(d,c,!1).call(),h.zoom&&(d.addListener("mouseover",r(d,c,!0,new google.maps.Point(14,20))),d.addListener("mouseout",r(d,c,!1)))})},r=function(a,b,c,d){return function(){var e=c?h.zoom:h.icon,f={url:h.path+b+e+".png",origin:new google.maps.Point(0,0),anchor:d};a.setIcon(f)}},s=function(){_infoWindow=new google.maps.InfoWindow({maxWidth:400})},t=function(a){var c=v(f[a]);_infoWindow.setContent(c),_infoWindow.open(b,f[a].marker)},u=function(){google.maps.event.addListener(_infoWindow,"closeclick",function(){o()})},v=function(a){var b;return b='<div id="maps-window">',b+="<h3>"+a.name+"</h3>",b+='<a href="'+a.website_url+'">'+a.website_url+"</a>",b+="<p>"+a.description+"</p>",b+="</div>"},w=function(){f.forEach(function(a,b){a.marker.addListener("click",function(){t(b)})})},x=function(b,c){return b?"string"!=typeof b?(console.error("Error: Map ID must be a string"),!1):a.getElementById(b)?c?c.lat&&c.lng?"number"!=typeof c.lat||"number"!=typeof c.lng?(console.error("Error: Lattitude and longitude must be numbers"),!1):!0:(console.error("Error: Please provide central location lattitude and longitude"),!1):(console.error("Error: No central location provided"),!1):(console.error("Error: Map ID must be part of the DOM!"),!1):(console.error("Error: No Map ID present"),!1)};return{init:i,getPoiArray:j,changeIcon:r,createInfoWindow:t,filterMarkers:p}}(document),PoiList=function(){var a,b,c,d,e,f=function(d,e,f){return a=d,b=e,c=f,g(),k(),this},g=function(){var b=h();document.getElementById(a).innerHTML=b},h=function(){var a;return a='<ul id="poi-list">',b.forEach(function(b,c){a+=i(b)}),a+="</ul>"},i=function(a){var b,c="img/amenity_icons/"+a.type+"_icon_large.png",d=a.name,e=.2,f=4;return b="<li>",b+='<img class="poi-icon" src="'+c+'">',b+="<h3>"+d+"</h3>",b+='<span class="poi-distance">'+e+" miles from you</span>",b+='<span class="poi-rating">Rating: <span>'+f+"</span></span>",b+="</li>"},j=function(a){b.forEach(function(b,c){b.type==a&&("none"===d[c].style.display?d[c].style.display=e:d[c].style.display="none")})},k=function(){d=document.getElementById("poi-list").getElementsByTagName("li"),e=d[0].style.display,Array.prototype.forEach.call(d,function(a,d){a.addEventListener("mouseover",c.changeIcon(b[d].marker,b[d].type,!0,new google.maps.Point(14,20))),a.addEventListener("mouseleave",c.changeIcon(b[d].marker,b[d].type,!1)),a.addEventListener("click",function(){c.createInfoWindow(d)})})};return{init:f,filterListItem:j}}(),PoiFilter=function(){var a,b,c,d,e,f=function(e,f,i,j){d=e,c=f,a=i,b=j,g(),h(),k()},g=function(){e=[];var a={};for(var b in c)"undefined"==typeof a[c[b].type]&&e.push(c[b].type),a[c[b].type]=0},h=function(){var a=i();document.getElementById(d).innerHTML=a},i=function(){var a;return a='<form action="">',e.forEach(function(b,c){a+=j(b)}),a+="</form>"},j=function(a){var b='<label for="'+a+'">'+a+'</label><input type="checkbox" id="'+a+'" name="filter" value= "'+a+'" checked>';return b},k=function(){var c=document.getElementsByName("filter");Array.prototype.forEach.call(c,function(c){c.addEventListener("change",function(){a.filterMarkers(this.value),b.filterListItem(this.value)})})};return{init:f}}(),MapsApp=function(a,b,c){var d,e,f,g,h=function(b,c,e,g){return d=a.init(b,c,e,g),f=d.getPoiArray(),this},i=function(a){e=b.init(a,f,d)},j=function(a){g=c.init(a,f,d,e)};return{init:h,createList:i,createFilter:j}}(PoiMap||{},PoiList||{},PoiFilter||{});