!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./PoiFilter"),h=d(g),i=a("./PoiList"),j=d(i),k=a("./PoiMap"),l=d(k),m=a("./PoiData"),n=d(m),o=a("./PubSub"),p=(d(o),function(){function a(b,c,d,f){e(this,a),this._center=c,this._theData=new n.default(d),this._theMap=new l.default(b,this._center,this._theData.getPoiData()),this._options=f,this._options.infoWindow===!0&&(this._theMap.initialiseInfoWindow(),this._theData.addMarkerClickEvents()),this._options.customMarkers&&this._theData.addCustomMarkers(this._options.customMarkers),this._options.showDistance&&this._theData.addDistances(c)}return f(a,[{key:"createList",value:function(a){this._theList=new j.default(a,this._theData.getPoiData())}},{key:"createFilter",value:function(a,b){this._theFilter=new h.default(a,this._theData.getPoiData())}},{key:"createSorter",value:function(a){this._theFilter.createSorter(a,this._options.sortBy)}}]),a}());c.default=p},{"./PoiData":2,"./PoiFilter":3,"./PoiList":4,"./PoiMap":5,"./PubSub":6}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./PubSub"),h=d(g),i=function(){function a(b){e(this,a),this._poiData=this._formatData(b),this._filterList=[],this._sortBy="type",this._subscribers()}return f(a,[{key:"_formatData",value:function(a){var b=this;return a.forEach(function(a,c){a.marker=b._createMarker(a.coords,null),a.key=c}),a}},{key:"_createMarker",value:function(a,b){return new google.maps.Marker({position:a,map:b})}},{key:"_resetMarkers",value:function(a){a.forEach(function(a,b){a.marker.setMap(null)})}},{key:"_indexOf",value:function(a,b){for(var c=0;c<b.length;){if(b[c]===a)return c;c++}return-1}},{key:"_toggleFilter",value:function(a,b){var c=this._indexOf(a,b),d=b.slice(0);return c!=-1?d.splice(c,1):d.push(a),d}},{key:"_filterData",value:function(a,b,c){if(!c.length)return a;var d=a.filter(function(a){for(var d=!0,e=0;e<c.length;e++)c[e]===a[b]&&(d=!1);return d});return d}},{key:"_addDistances",value:function(a,b,c){var d=this,e=new google.maps.LatLng(b),f=new google.maps.DistanceMatrixService;f.getDistanceMatrix({origins:[e],destinations:a,travelMode:"WALKING"},function(a,b){a.rows[0].elements.forEach(function(a,b){var d=(a.distance.value/1e3).toFixed(1);c[b].distance=d}),h.default.publish("dataUpdated",d.getPoiData())})}},{key:"_sortData",value:function(a,b){if("undefined"==typeof b)return a;var c=a.slice(0).sort(function(a,c){return a[b]<c[b]?-1:a[b]>c[b]?1:0});return c}},{key:"_makeIcon",value:function(a,b,c){var d=this,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,f=arguments[4];return function(){var g=d._customMarkersSettings.path,h=c?d._customMarkersSettings.zoom:d._customMarkersSettings.icon,i={url:g+b+h+".png",origin:new google.maps.Point(0,0),anchor:f};a.setIcon(i),a.setZIndex(e)}}},{key:"_createCustomMarkers",value:function(a,b){var c=this;a.forEach(function(a,d){var e=a.type,f=a.marker;c._makeIcon(f,e,!1).call(),b.zoom&&(f.addListener("mouseover",c._makeIcon(f,e,!0,100,new google.maps.Point(14,20))),f.addListener("mouseout",c._makeIcon(f,e,!1)))})}},{key:"_addCustomMarkerSubscribers",value:function(a){var b=this;a.zoom&&(h.default.subscribe("listItemMouseOver",function(a,c){var d=c.type,e=c.marker;b._makeIcon(e,d,!0,100,new google.maps.Point(14,20)).call()}),h.default.subscribe("listItemMouseOut",function(a,c){var d=c.type,e=c.marker;b._makeIcon(e,d,!1).call()}))}},{key:"_subscribers",value:function(){var a=this;h.default.subscribe("filterToggled",function(b,c){a._filterList=a._toggleFilter(c,a._filterList),h.default.publish("dataUpdated",a.getPoiData(!0))}),h.default.subscribe("sortToggled",function(b,c){a._sortBy=c,h.default.publish("dataUpdated",a.getPoiData(!1))})}},{key:"getPoiData",value:function(a){a===!0&&this._resetMarkers(this._poiData);var b=this._filterData(this._poiData,"type",this._filterList),c=this._sortData(b,this._sortBy),d={data:c,sortedBy:this._sortBy};return d}},{key:"addMarkerClickEvents",value:function(){this._poiData.forEach(function(a,b){a.marker.addListener("click",function(){h.default.publish("poiClicked",a)})})}},{key:"addCustomMarkers",value:function(a){this._customMarkersSettings=a,this._createCustomMarkers(this._poiData,this._customMarkersSettings),this._addCustomMarkerSubscribers(this._customMarkersSettings)}},{key:"addDistances",value:function(a){var b=this._poiData.map(function(a,b){return a.marker.getPosition()});this._addDistances(b,a,this._poiData)}}]),a}();c.default=i},{"./PubSub":6}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./PubSub"),h=d(g),i=function(){function a(b,c){e(this,a),this._filterId=b,this._filterListDOMElement=document.getElementById(this._filterId),this._filterArray=this._getDistinctValues(c.data,"type"),this._createFilterList(this._filterArray,this._filterListDOMElement),this._addFilterEventListeners()}return f(a,[{key:"_getDistinctValues",value:function(a,b){var c=[],d={};for(var e in a)"undefined"==typeof d[a[e][b]]&&c.push(a[e][b]),d[a[e][b]]=0;return c}},{key:"_createFilterList",value:function(a,b){var c=this._makeFilterFormHTML(a);b.innerHTML=c}},{key:"_makeFilterFormHTML",value:function(a){var b=this,c="";return a.forEach(function(a,d){c+=b._makeFilterItemHTML(a)}),c}},{key:"_makeFilterItemHTML",value:function(a){var b="img/amenity_icons/"+a+"_icon_small.png",c='<li class="filters__item">';return c+='<img class="filters__icon" src="'+b+'">',c+='<input type="checkbox" id="'+a+'" name="map-filter" value= "'+a+'" checked>',c+='<label class="filters__label" for="'+a+'">'+(a.charAt(0).toUpperCase()+a.slice(1))+"</label>",c+="</li>"}},{key:"_createSorterList",value:function(a,b){var c=this._makeSorterHTML(a);b.innerHTML=c}},{key:"_makeSorterHTML",value:function(a){var b="";return a.forEach(function(a,c){b+='<option value="'+a+'" >'+a+"</option>"}),b}},{key:"_addFilterEventListeners",value:function(){var a=document.getElementsByName("map-filter");Array.prototype.forEach.call(a,function(a){a.addEventListener("change",function(){h.default.publish("filterToggled",a.value)})})}},{key:"_addSorterEventListeners",value:function(a){a.addEventListener("change",function(a){h.default.publish("sortToggled",a.target[a.target.selectedIndex].value)})}},{key:"createSorter",value:function(a,b){this._sorterId=a;var c=document.getElementById(this._sorterId);this._createSorterList(b,c),this._addSorterEventListeners(c)}}]),a}();c.default=i},{"./PubSub":6}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./PubSub"),h=d(g),i=function(){function a(b,c){e(this,a),this._listId=b,this._subscriptions(),this._updatePoiList(c)}return f(a,[{key:"_updatePoiList",value:function(a){document.getElementById(this._listId).innerHTML="";var b=this._createListHTML(a);document.getElementById(this._listId).innerHTML=b,this._addListEventListeners(a)}},{key:"_createListHTML",value:function(a){var b=void 0;return b="type"===a.sortedBy?this._makeTitledListHTML(a):this._makeListHTML(a)}},{key:"_makeTitledListHTML",value:function(a){var b=this,c=this._makeDistinctArray(a.data),d="";return c.forEach(function(c,e){d+="<li><ul>",d+='<h3 class="pois__title">'+c+"</h3>",a.data.forEach(function(a,e){a.type===c&&(d+=b._makeListItemHTML(a))})}),d}},{key:"_makeListHTML",value:function(a){var b=this,c="";return console.log(a),a.data.forEach(function(a,d){c+=b._makeListItemHTML(a)}),c}},{key:"_makeListItemHTML",value:function(a){var b="img/amenity_icons/"+a.type+"_icon_large.png",c=a.name,d=4,e='<li class="poi" data-key="'+a.key+'">';return e+='<img class="poi__icon" src="'+b+'">',e+='<h4 class="poi__title">'+c+"</h4>","undefined"!=typeof a.distance&&(e+='<span class="poi__distance">'+a.distance+"km from you</span>"),e+='<span class="poi__rating">Rating: <span>'+d+"</span></span>",e+="</li>"}},{key:"_addListEventListeners",value:function(a){var b=document.getElementById(this._listId).getElementsByClassName("poi");[].forEach.call(b,function(b,c){for(var d=b.getAttribute("data-key"),e=void 0,f=0;f<a.data.length;f++)a.data[f].key==d.toString()&&(e=a.data[f]);b.addEventListener("mouseover",function(){h.default.publish("listItemMouseOver",e)}),b.addEventListener("mouseleave",function(){h.default.publish("listItemMouseOut",e)}),b.addEventListener("click",function(){h.default.publish("poiClicked",e)})})}},{key:"_makeDistinctArray",value:function(a){var b=[],c={};for(var d in a)"undefined"==typeof c[a[d].type]&&b.push(a[d].type),c[a[d].type]=0;return b}},{key:"_subscriptions",value:function(){var a=this;h.default.subscribe("poiClicked",function(a,b){}),h.default.subscribe("dataUpdated",function(b,c){a._updatePoiList(c)})}}]),a}();c.default=i},{"./PubSub":6}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./PubSub"),h=d(g),i=function(){function a(b,c,d){e(this,a),this._validateMapData(b,c)&&(this._mapId=b,this._mainLocation=c,this._theMap=this._createMap(),this._mainMarker=this._createMarker(this._mainLocation,this._theMap),this.updatePoiMarkers(d),this._subscriptions())}return f(a,[{key:"_createMap",value:function(){var a=document.getElementById(this._mapId),b=new google.maps.Map(a,{center:this._mainLocation,scrollwheel:!1,zoom:15,styles:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.business",elementType:"geometry.fill",stylers:[{visibility:"on"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#b4d4e1"},{visibility:"on"}]}]});return b}},{key:"_createMarker",value:function(a,b){return new google.maps.Marker({position:a,map:b})}},{key:"_validateMapData",value:function(a,b){return a?"string"!=typeof a?(console.error("Error: Map ID must be a string"),!1):document.getElementById(a)?b?b.lat&&b.lng?"number"==typeof b.lat&&"number"==typeof b.lng||(console.error("Error: Lattitude and longitude must be numbers"),!1):(console.error("Error: Please provide central location lattitude and longitude"),!1):(console.error("Error: No central location provided"),!1):(console.error("Error: Map ID must be part of the DOM!"),!1):(console.error("Error: No Map ID present"),!1)}},{key:"_setBounds",value:function(a){this._bounds=new google.maps.LatLngBounds,this._bounds.extend(this._mainMarker.getPosition());for(var b=0;b<a.length;b++)this._bounds.extend(a[b].marker.getPosition());this._fitBounds()}},{key:"_fitBounds",value:function(){this._theMap.fitBounds(this._bounds)}},{key:"_createInfoWindow",value:function(){this._infoWindow=new google.maps.InfoWindow({maxWidth:400})}},{key:"_onDestroyInfoWindow",value:function(){var a=this;google.maps.event.addListener(this._infoWindow,"closeclick",function(){a._fitBounds()})}},{key:"_setInfoWindow",value:function(a){var b=this._composeInfoWindowString(a);this._infoWindow.setContent(b),this._infoWindow.open(this._theMap,a.marker),this._theMap.panTo(a.marker.getPosition())}},{key:"_composeInfoWindowString",value:function(a){var b;return b='<div id="maps-window">',b+="<h3>"+a.name+"</h3>",b+='<a target="_blank" href="'+a.website_url+'">Go to website</a>',b+="<p>"+a.description+"</p>",b+="</div>"}},{key:"_subscriptions",value:function(){var a=this;h.default.subscribe("poiClicked",function(b,c){a._setInfoWindow(c)}),h.default.subscribe("dataUpdated",function(b,c){a.updatePoiMarkers(c)}),h.default.subscribe("filterToggled",function(b,c){a._infoWindow.close()})}},{key:"updatePoiMarkers",value:function(a){var b=this,c=a.data;c.forEach(function(a,c){a.marker.setMap(b._theMap)}),this._setBounds(c)}},{key:"initialiseInfoWindow",value:function(){this._createInfoWindow(),this._onDestroyInfoWindow()}}]),a}();c.default=i},{"./PubSub":6}],6:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),this.topics=[],this.subscriberUid=-1}return e(a,[{key:"publish",value:function(a,b){if(!this.topics[a])return!1;for(var c=this.topics[a],d=c?c.length:0;d--;)c[d].func(a,b);return this}},{key:"subscribe",value:function(a,b){this.topics[a]||(this.topics[a]=[]);var c=(++this.subscriberUid).toString();return this.topics[a].push({token:c,func:b}),c}},{key:"unsubscribe",value:function(a){for(var b in this.topics)if(this.topics[b])for(var c=0,d=this.topics[b].length;c<d;c++)if(this.topics[b][c].token===a)return this.topics[b].splice(c,1),a;return this}}]),a}(),g=new f;c.default=g},{}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}var e=a("./MapsApp/MapsApp"),f=d(e);window.MapsApp=f.default},{"./MapsApp/MapsApp":1}]},{},[7]);